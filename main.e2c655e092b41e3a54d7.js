(()=>{"use strict";var e={750:(e,t,n)=>{e.exports=n.p+"assets/ab1b382cabc3fc9b733c..png"},391:(e,t,n)=>{n.r(t)},331:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const i=n(421),s=n(921),r=n(806),a=n(218),o=n(647);t.App=class{constructor(e){this.rootElement=e,this.header=new s.Header,this.inputCreate=new r.AllInputs,this.garage=new i.GarageContainer,this.serverInstruction=new o.ServerInstruction,this.score=new a.Score}createHeader(){this.rootElement.appendChild(this.header.element)}createInputs(){this.rootElement.appendChild(this.inputCreate.element)}createGarage(){this.score.pageAndWinners(),this.rootElement.appendChild(this.garage.element),this.rootElement.appendChild(this.score.element),this.serverInstruction.howMutchCars(),this.serverInstruction.fillGarage(1),this.score.fillScore(this.score.SCORE_CURRENT_PAGE,"ASC","id"),this.score.addScoreBtn(),this.toGaragePage(),this.toScorePage(),this.score.sordById(),this.score.sordByWins(),this.score.sordByTime(),this.score.sordOrder()}toGaragePage(){const e=document.querySelector(".garage"),t=document.querySelector(".form"),n=document.getElementById("toGarage"),i=document.querySelector(".score"),s=document.getElementById("scoreDataWrapper"),r=document.getElementById("btnContainer");r&&s&&(r.style.display="none",s.style.display="none",this.score.nextBtn.style.display="none",this.score.prevBtn.style.display="none",n&&n.addEventListener("click",(()=>{s.style.display="none",e.classList.remove("not-visible"),t.classList.remove("not-visible"),i.classList.add("not-visible"),r.style.display="none",this.score.nextBtn.style.display="none",this.score.prevBtn.style.display="none",window.location.hash="/garage"})))}toScorePage(){const e=document.querySelector(".garage"),t=document.querySelector(".score"),n=document.querySelector(".form"),i=document.getElementById("toScore"),s=document.getElementById("scoreDataWrapper"),r=document.getElementById("btnContainer");s&&r&&i&&i.addEventListener("click",(()=>{s.style.display="flex",r.style.display="flex",e.classList.add("not-visible"),n.classList.add("not-visible"),t.classList.remove("not-visible"),this.score.nextBtn.style.display="flex",this.score.prevBtn.style.display="flex",null==s||s.classList.remove("not-visible"),s&&(s.style.display="flex",t.innerHTML="",this.score.createScoreNames(),this.score.fillScore(1,"ASC","id"),window.location.hash="/score")}))}}},455:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}}},421:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GarageContainer=void 0;const i=n(455),s=n(905),r=n(647);class a extends i.BaseComponent{constructor(){super("section",["garage"]),this.garagePage=new s.GaragePage,this.pageDisplay=document.createElement("div"),this.carCounter=document.createElement("h2"),this.nextBtn=document.createElement("button"),this.prevBtn=document.createElement("button"),this.serverInstructions=new r.ServerInstruction,this.carCounter.classList.add("garage-counter"),this.carCounter.id="carCounter",this.nextBtn.innerText="next",this.prevBtn.innerText="prev",this.nextBtn.classList.add("button"),this.nextBtn.classList.add("garage-page-btn"),this.prevBtn.classList.add("button"),this.prevBtn.classList.add("garage-page-btn"),this.pageDisplay.classList.add("garage-page__number"),this.pageDisplay.id="pageNumber",this.element.appendChild(this.carCounter),this.element.appendChild(this.pageDisplay),this.element.appendChild(this.garagePage.element),this.element.appendChild(this.prevBtn),this.element.appendChild(this.nextBtn),this.pageNext(),this.pagePrev(),window.location.hash="/garage"}pageCounter(e){this.pageDisplay.innerText=`Page: ${e}`}pageNext(){this.serverInstructions.howMutchCars(),this.nextBtn.addEventListener("click",(e=>{this.serverInstructions.nextPage()}))}pagePrev(){this.prevBtn.addEventListener("click",(()=>{this.serverInstructions.prevPage()}))}}t.GarageContainer=a},575:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GarageHeader=void 0;const i=n(455);class s extends i.BaseComponent{constructor(e,t,n){super("div",["garage-header"]),this.btnRemove=document.createElement("button"),this.btnA=document.createElement("button"),this.btnRemove.innerText="remove",this.btnRemove.id=`remove-${n}`,this.btnRemove.classList.add("button"),this.btnA.innerText="A",this.btnA.id=`a-${n}`,this.btnA.classList.add("car-move"),this.element.appendChild(this.btnRemove),this.addSelectListner(n,e,t),this.element.appendChild(this.btnA),this.addBId(n),this.addCarName(e,n)}addCarName(e,t){const n=document.createElement("h3");n.id=`car-name-${t}`,n.classList.add("car-name"),n.innerText=`${e}`,this.element.appendChild(n)}addBId(e){const t=document.createElement("button");t.innerText="B",t.id=`b-${e}`,t.classList.add("car-reset"),this.element.appendChild(t)}addSelectListner(e,t,n){const i=document.createElement("button");i.innerText="select",i.id=`select-${e}`,i.classList.add("button"),i.addEventListener("click",(()=>{const i=document.getElementById("carNameEdit"),s=document.getElementById("carColorEdit");i.value=t,i.name=`${e}`,s.value=n})),this.element.appendChild(i)}}t.GarageHeader=s},181:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GarageItem=void 0;const i=n(455);class s extends i.BaseComponent{constructor(e){super("div",["garage-item"]),this.element.id=`garage-${e}`}}t.GarageItem=s},873:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GarageTrack=void 0;const s=n(455),r=i(n(750));class a extends s.BaseComponent{constructor(e,t){super("div",["garage-track"]),this.imgFlag=document.createElement("img"),this.color=e,this.carId=t,this.fillCar(),this.imgFlag.classList.add("track-flag"),this.imgFlag.src=`${r.default}`,this.element.appendChild(this.imgFlag)}fillCar(){this.element.innerHTML=`\n      <div class = "car-wrapper" name = "${this.carId}">\n        <svg  viewBox="0 0 16 16" id = "car-${this.carId}" style="fill:${this.color}" width = "50px" xmlns="http://www.w3.org/2000/svg">\n          <path d="m14.794 5.1662-1.12213-3.74042c-.255859-.853027-1.02588-1.42578-1.91602-1.42578h-7.51172c-.890137 0-1.66016.572754-1.91602 1.42578l-1.12213 3.74042c-.708557.307922-1.20599 1.01306-1.20599 1.8338v4c0 .552246.447754 1 1 1h.000061l-.000061.999939c0 .552307.447693 1.00006 1 1.00006h1.00006c.552246 0 1-.447754 1-1l-.0004272-1h8.00037l-.000061.999939c0 .552307.447693 1.00006 1 1.00006h1.00006c.552307 0 1-.447754 1-1v-.999939l-.0003662-.000061h.0003662c.552246 0 1-.447754 1-1v-4c0-.82074-.497436-1.52588-1.20599-1.8338zm-10.5499-3.1662h7.51172l.900024 3h-9.31177l.900024-3zm-.244141 7.5c-.552307 0-1-.447754-1-1 0-.552307.447693-1 1-1s1 .447693 1 1c0 .552246-.447693 1-1 1zm8 0c-.552307 0-1-.447754-1-1 0-.552307.447693-1 1-1s1 .447693 1 1c0 .552246-.447693 1-1 1z" transform="translate(0 1)"/>\n        </svg>\n      </div>\n    `}}t.GarageTrack=a},905:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GaragePage=void 0;const i=n(455);class s extends i.BaseComponent{constructor(){super("div",["garage-page"]),this.element.id="garagePage"}}t.GaragePage=s},921:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;const i=n(455);class s extends i.BaseComponent{constructor(){super("header",["header"]),this.toGarage=document.createElement("button"),this.toScore=document.createElement("button"),this.toGarage.classList.add("button"),this.toGarage.innerText="to Garage",this.toGarage.id="toGarage",this.toScore.classList.add("button"),this.toScore.innerText="to Score",this.toScore.id="toScore",this.element.appendChild(this.toGarage),this.element.appendChild(this.toScore)}}t.Header=s},806:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AllInputs=void 0;const i=n(455),s=n(240),r=n(763),a=n(746);class o extends i.BaseComponent{constructor(){super("section",["form"]),this.inputCreate=new s.InputCreate,this.inputEdit=new r.InputEdit,this.managerButton=new a.MangerButtons,this.element.appendChild(this.inputCreate.element),this.element.appendChild(this.inputEdit.element),this.element.appendChild(this.managerButton.element)}}t.AllInputs=o},240:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InputCreate=void 0;const i=n(455),s=n(575),r=n(181),a=n(873),o=n(647);class d extends i.BaseComponent{constructor(){super("form",["form-header"]),this.inputCarCreate=document.createElement("input"),this.inputCarColor=document.createElement("input"),this.button=document.createElement("button"),this.serverInstruction=new o.ServerInstruction,this.inputCarCreate.type="text",this.inputCarCreate.id="carNameCreate",this.inputCarColor.type="color",this.inputCarColor.id="carNameCreate",this.inputCarColor.value="#000",this.button.type="submit",this.button.id="createCar",this.button.classList.add("button"),this.button.innerText="create",this.element.appendChild(this.inputCarCreate),this.element.appendChild(this.inputCarColor),this.element.appendChild(this.button),this.addCreateListner()}addCreateListner(){this.button.addEventListener("click",(e=>{e.preventDefault();const t={name:this.inputCarCreate.value,color:this.inputCarColor.value};0!==t.name.length?fetch("http://127.0.0.1:3000/garage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json())).then((e=>{var t;const n=document.querySelectorAll(".garage-item");if(n.length<7){const i=new r.GarageItem(e.id),o=new s.GarageHeader(e.name,e.color,e.id),d=new a.GarageTrack(e.color,e.id);i.element.appendChild(o.element),i.element.appendChild(d.element),null===(t=n[0].parentElement)||void 0===t||t.appendChild(i.element)}})).finally((()=>{this.inputCarColor.value="#000000",this.inputCarCreate.value="";const e=document.getElementById("pageNumber");if(!(null==e?void 0:e.innerText))return;const t=null==e?void 0:e.innerText.split(" ");this.serverInstruction.CURRENT_PAGE=+t[1],this.serverInstruction.fillGarage(+t[1]),this.serverInstruction.pageNumber(+t[1]),this.serverInstruction.howMutchCars()})):alert("ERROR: Name length is 0")}))}}t.InputCreate=d},763:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InputEdit=void 0;const i=n(455),s=n(647);class r extends i.BaseComponent{constructor(){super("form",["form-header"]),this.inputCarEdit=document.createElement("input"),this.inputCarColor=document.createElement("input"),this.button=document.createElement("button"),this.serverInsructions=new s.ServerInstruction,this.inputCarEdit.type="text",this.inputCarEdit.id="carNameEdit",this.inputCarColor.type="color",this.inputCarColor.id="carColorEdit",this.inputCarColor.value="#000000",this.button.type="submit",this.button.id="editCar",this.button.classList.add("button"),this.button.innerText="edit",this.element.appendChild(this.inputCarEdit),this.element.appendChild(this.inputCarColor),this.element.appendChild(this.button),this.inputUpdate()}inputUpdate(){this.button.addEventListener("click",(e=>{e.preventDefault();const t=this.inputCarEdit.value,n=this.inputCarColor.value,i=this.inputCarEdit.name;if(0===i.length||0===t.length)return void alert("Choose car or init name");this.serverInsructions.editCar(n,t,i);const s=document.getElementById(`car-name-${i}`),r=this.inputCarColor.value,a=document.getElementById(`car-${i}`);null!==s&&null!==a&&(a.style.fill=r,s.innerText=this.inputCarEdit.value,this.inputCarEdit.value="",this.inputCarEdit.name="",this.inputCarColor.value="#000000")}))}}t.InputEdit=r},746:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MangerButtons=void 0;const i=n(455),s=n(647);class r extends i.BaseComponent{constructor(){super("div",["form-manager"]),this.ServerInstruction=new s.ServerInstruction,this.buttonGenerate=document.createElement("button"),this.buttonStart=document.createElement("button"),this.buttonStart.classList.add("button"),this.buttonStart.id="startRace",this.buttonStart.innerText="start";const e=document.createElement("button");e.classList.add("button"),e.id="resetRace",e.innerText="reset",this.buttonGenerate.classList.add("button"),this.buttonGenerate.id="generateCars",this.buttonGenerate.innerText="generate",this.element.appendChild(this.buttonStart),this.element.appendChild(e),this.element.appendChild(this.buttonGenerate),this.createHundred(),this.start()}createHundred(){this.buttonGenerate.addEventListener("click",(()=>{this.ServerInstruction.createHundredRand()}))}start(){this.buttonStart.addEventListener("click",(()=>{this.ServerInstruction.startAllCars()}))}}t.MangerButtons=r},218:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Score=void 0;const i=n(455);let s=[];class r extends i.BaseComponent{constructor(){super("section",["score","not-visible"]),this.SCORE_CARS_COUNTER=1,this.SCORE_PAGE_COUNTER=1,this.SCORE_CURRENT_PAGE=1,this.SORT_ORDER="ASC",this.SORT_TYPE="id",this.nextBtn=document.createElement("button"),this.prevBtn=document.createElement("button"),this.sortById=document.createElement("button"),this.sortByWins=document.createElement("button"),this.sortByTime=document.createElement("button"),this.sortOrder=document.createElement("button"),this.tabel=document.createElement("div"),this.prevBtn.addEventListener("click",(()=>{this.prevPage()})),this.nextBtn.addEventListener("click",(()=>{this.nextPage()}))}pageAndWinners(){const e=document.createElement("div"),t=document.createElement("h3"),n=document.createElement("div");t.id="winners",n.id="pageScore",e.id="scoreDataWrapper",t.innerText="Winners(1)",n.innerText="Page: 1",e.appendChild(t),e.appendChild(n),document.body.appendChild(e)}addScoreBtn(){const e=document.createElement("div");e.classList.add("btn-container"),e.id="btnContainer",this.sortOrder.id="sortOrder",this.sortOrder.classList.add("button"),this.sortOrder.innerText="sort order",this.sortById.id="sortById",this.sortById.classList.add("button"),this.sortById.innerText="sort by Id",this.sortByTime.id="sortByTime",this.sortByTime.classList.add("button"),this.sortByTime.innerText="sort by time",this.sortByWins.id="sortByWins",this.sortByWins.classList.add("button"),this.sortByWins.innerText="sort by wins",this.nextBtn.classList.add("button"),this.nextBtn.innerText="next",this.prevBtn.id="scoreNext",this.prevBtn.classList.add("button"),this.prevBtn.innerText="prev",this.prevBtn.id="scorePrev",e.appendChild(this.prevBtn),e.appendChild(this.nextBtn),e.appendChild(this.sortByTime),e.appendChild(this.sortByWins),e.appendChild(this.sortById),e.appendChild(this.sortOrder),document.body.appendChild(e)}sordById(){const e=document.getElementById("sortById");null==e||e.addEventListener("click",(()=>{this.SORT_TYPE="id",this.fillScore(this.SCORE_CURRENT_PAGE,this.SORT_ORDER,this.SORT_TYPE)}))}sordByWins(){const e=document.getElementById("sortByWins");null==e||e.addEventListener("click",(()=>{this.SORT_TYPE="wins",this.fillScore(this.SCORE_CURRENT_PAGE,this.SORT_ORDER,this.SORT_TYPE)}))}sordByTime(){const e=document.getElementById("sortByTime");null==e||e.addEventListener("click",(()=>{this.SORT_TYPE="time",this.fillScore(this.SCORE_CURRENT_PAGE,this.SORT_ORDER,this.SORT_TYPE)}))}createScoreNames(){const e=document.createElement("div");e.classList.add("tr");const t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),r=document.createElement("div");t.innerText="Number",n.innerText="Car",i.innerText="Name",i.classList.add("score-name"),s.innerText="Wins",r.innerText="Time",this.tabel.id="scoreTabel",e.appendChild(t),e.appendChild(n),e.appendChild(i),e.appendChild(s),e.appendChild(r),this.tabel.appendChild(e),this.element.appendChild(this.tabel)}sordOrder(){const e=document.getElementById("sortOrder");null==e||e.addEventListener("click",(()=>{"ASC"===this.SORT_ORDER?this.SORT_ORDER="DESC":"DESC"===this.SORT_ORDER&&(this.SORT_ORDER="ASC"),this.fillScore(this.SCORE_CURRENT_PAGE,this.SORT_ORDER,this.SORT_TYPE)}))}ScoreList(){const e=[],t=document.getElementById("winners");fetch("http://127.0.0.1:3000/winners",{}).then((e=>e.json())).then((t=>e.push(...t))).then((()=>{this.SCORE_CARS_COUNTER=e.length,this.SCORE_PAGE_COUNTER=Math.trunc(this.SCORE_CARS_COUNTER/10),this.SCORE_CARS_COUNTER/10>Math.trunc(this.SCORE_CARS_COUNTER/10)&&(this.SCORE_PAGE_COUNTER=Math.trunc(this.SCORE_CARS_COUNTER/10)+1),t&&(t.innerText=`Winners(${this.SCORE_CARS_COUNTER})`)}))}pageScoreNumber(e){const t=document.getElementById("pageScore");t&&(t.innerText=`Page: ${e}`)}nextPage(){this.ScoreList(),this.SCORE_CURRENT_PAGE!==this.SCORE_PAGE_COUNTER&&(this.SCORE_CURRENT_PAGE+=1,this.fillScore(this.SCORE_CURRENT_PAGE,this.SORT_ORDER,this.SORT_TYPE),this.pageScoreNumber(this.SCORE_CURRENT_PAGE))}prevPage(){this.ScoreList(),this.pageScoreNumber(this.SCORE_CURRENT_PAGE),1!==this.SCORE_CURRENT_PAGE&&(this.SCORE_CURRENT_PAGE-=1,this.fillScore(this.SCORE_CURRENT_PAGE,this.SORT_ORDER,this.SORT_TYPE),this.pageScoreNumber(this.SCORE_CURRENT_PAGE))}createScorePoint(e,t,n,i,s){const r=document.createElement("div");r.classList.add("tr");const a=document.createElement("div"),o=document.createElement("div"),d=document.createElement("div"),c=document.createElement("div"),l=document.createElement("div");a.innerText=`${e}`,o.innerHTML=`\n    <svg  viewBox="0 0 16 16" style="fill:${t}" width = "16px" xmlns="http://www.w3.org/2000/svg">\n      <path d="m14.794 5.1662-1.12213-3.74042c-.255859-.853027-1.02588-1.42578-1.91602-1.42578h-7.51172c-.890137 0-1.66016.572754-1.91602 1.42578l-1.12213 3.74042c-.708557.307922-1.20599 1.01306-1.20599 1.8338v4c0 .552246.447754 1 1 1h.000061l-.000061.999939c0 .552307.447693 1.00006 1 1.00006h1.00006c.552246 0 1-.447754 1-1l-.0004272-1h8.00037l-.000061.999939c0 .552307.447693 1.00006 1 1.00006h1.00006c.552307 0 1-.447754 1-1v-.999939l-.0003662-.000061h.0003662c.552246 0 1-.447754 1-1v-4c0-.82074-.497436-1.52588-1.20599-1.8338zm-10.5499-3.1662h7.51172l.900024 3h-9.31177l.900024-3zm-.244141 7.5c-.552307 0-1-.447754-1-1 0-.552307.447693-1 1-1s1 .447693 1 1c0 .552246-.447693 1-1 1zm8 0c-.552307 0-1-.447754-1-1 0-.552307.447693-1 1-1s1 .447693 1 1c0 .552246-.447693 1-1 1z" transform="translate(0 1)"/>\n    </svg>\n    `,d.innerText=`${n}`,c.innerText=`${i}`,l.innerText=`${s}`,r.appendChild(a),r.appendChild(o),r.appendChild(d),d.classList.add("score-name"),r.appendChild(c),r.appendChild(l);const h=document.getElementById("scoreTabel");null==h||h.appendChild(r)}fillScore(e,t,n){s=[],fetch(`http://127.0.0.1:3000/winners?_page=${e}&_limit=10&_sort=${n}&_order=${t}`).then((e=>e.json())).then((e=>{s=[],s.push(...e)})).then((()=>{this.ScoreList(),document.querySelector(".score")&&(this.tabel.innerHTML="",this.createScoreNames(),s.forEach((e=>{fetch(`http://127.0.0.1:3000/garage/${e.id}`).then((e=>e.json())).then((t=>{void 0!==e.wins&&void 0!==e.time&&this.createScorePoint(+`${this.SCORE_CURRENT_PAGE-1}${s.indexOf(e)+1}`,t.color,t.name,e.wins,e.time)}))})))}))}}t.Score=r},647:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function o(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ServerInstruction=void 0;const s=n(575),r=n(873),a=n(181),o=["C","Java","Python","D","PHP","Type","Action","Pascal","Maple","Оберон"],d=["++","Script","#","bc","1","2","3","Оберон","Fusion","Game Maker Language"],c=e=>i(void 0,void 0,void 0,(function*(){return yield fetch(`http://127.0.0.1:3000/engine?id=${e}&status=started`)}));let l=[],h=[];t.ServerInstruction=class{constructor(){this.CARS_COUNTER=1,this.PAGE_COUNTER=1,this.CURRENT_PAGE=1}removeCar(e){fetch(`http://127.0.0.1:3000/garage/${e}`,{method:"DELETE"}),fetch(`http://127.0.0.1:3000/winners/${e}`,{method:"DELETE"}),this.howMutchCars();const t=document.getElementById("garagePage");t&&(t.innerHTML="",this.fillGarage(this.CURRENT_PAGE),this.pageNumber(this.CURRENT_PAGE))}editCar(e,t,n){fetch(`http://127.0.0.1:3000/garage/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,color:e})})}startAllCars(){l=[],h.forEach((e=>i(this,void 0,void 0,(function*(){yield this.startCar(e.id)}))))}aBtn(e,t){const n=document.getElementById(`a-${e}`);n&&(n.style.display=!1===t?"none":"block")}pageNumber(e){const t=document.getElementById("pageNumber");t&&(t.innerText=`Page: ${e}`)}getWinner(){let e=0,t=0;l.forEach((n=>{n.velocity>e&&500!==n.status&&(e=n.velocity,t=n.id)})),alert(`Car ${t} win this race!!! For ${5e5/e/1e3} sec`),this.checkWinner(e,t)}checkWinner(e,t){fetch(`http://127.0.0.1:3000/winners/${t}`).then((n=>{if(404===n.status)this.pushWinnerData(e,t);else if(200===n.status)return n.json();return 0})).then((t=>{this.putWinnerData(t,e)}))}pushWinnerData(e,t){const n={id:t,wins:1,time:(5e5/e/1e3).toFixed(2)};fetch("http://127.0.0.1:3000/winners",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})}putWinnerData(e,t){const n=e.wins+1,i=e.time,s=(5e5/t/1e3).toFixed(2),r={wins:n,time:""};r.time=i<s?`${i}`:`${s}`,fetch(`http://127.0.0.1:3000/winners/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})}startCar(e){this.aBtn(e,!1),c(e).then((t=>i(this,void 0,void 0,(function*(){var n,s,r;const a=yield t.json(),o=null===(n=document.getElementById(`car-${e}`))||void 0===n?void 0:n.animate([{transform:"translateX(0px)"},{transform:`translateX(${document.body.clientWidth-300}px)`}],{duration:5e5/a.velocity,easing:"ease-in-out",fill:"forwards"}),d={id:e,velocity:a.velocity};var c;(c=e,i(void 0,void 0,void 0,(function*(){return yield fetch(`http://127.0.0.1:3000/engine?id=${c}&status=drive`)}))).then((t=>i(this,void 0,void 0,(function*(){h.forEach((t=>{t.id===e&&h[h.length-1].id===e&&this.getWinner()})),500!==t.status&&404!==t.status||(null==o||o.pause(),d.status=t.status)})))),l.push(d),null===(s=document.getElementById(`b-${e}`))||void 0===s||s.addEventListener("click",(()=>{null==o||o.cancel(),this.aBtn(e,!0)})),null===(r=document.getElementById("resetRace"))||void 0===r||r.addEventListener("click",(()=>{null==o||o.cancel(),this.aBtn(e,!0)}))}))))}createHundredRand(){for(let e=0;e<100;e++){const e={name:`${o[Math.floor(10*Math.random())]} ${d[Math.floor(10*Math.random())]}`,color:`#${Math.floor(Math.random()*Math.pow(256,3)).toString(16)}`};fetch("http://127.0.0.1:3000/garage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}this.howMutchCars(),this.fillGarage(this.CURRENT_PAGE)}howMutchCars(){const e=[];fetch("http://127.0.0.1:3000/garage",{}).then((e=>e.json())).then((t=>e.push(...t))).then((()=>{const t=document.getElementById("carCounter");t&&(t.innerHTML=`Garage(${e.length})`,this.CARS_COUNTER=e.length,this.PAGE_COUNTER=Math.trunc(this.CARS_COUNTER/7),this.CARS_COUNTER/7>Math.trunc(this.CARS_COUNTER/7)&&(this.PAGE_COUNTER=Math.trunc(this.CARS_COUNTER/7)+1))}))}nextPage(){this.howMutchCars(),this.fillGarage(this.CURRENT_PAGE),this.pageNumber(this.CURRENT_PAGE),this.CURRENT_PAGE!==this.PAGE_COUNTER&&(this.CURRENT_PAGE+=1,this.fillGarage(this.CURRENT_PAGE))}prevPage(){this.howMutchCars(),this.pageNumber(this.CURRENT_PAGE),this.fillGarage(this.CURRENT_PAGE),1!==this.CURRENT_PAGE&&(this.CURRENT_PAGE-=1,this.fillGarage(this.CURRENT_PAGE))}getVelocity(e,t){c(e).then((e=>e.json())).then((e=>{h[t].velocity=e.velocity}))}fillGarage(e){this.howMutchCars();const t=[];fetch(`http://127.0.0.1:3000/garage?_page=${e}&_limit=7`).then((e=>e.json())).then((e=>t.push(...e))).then((()=>{const e=document.getElementById("garagePage");e&&(e.innerHTML="",t.forEach((t=>i(this,void 0,void 0,(function*(){const n=new a.GarageItem(t.id),i=new r.GarageTrack(t.color,t.id),o=new s.GarageHeader(t.name,t.color,t.id);o.btnRemove.addEventListener("click",(()=>{const e=document.getElementById(`garage-${t.id}`);null==e||e.remove(),this.removeCar(t.id)})),o.btnA.addEventListener("click",(()=>{this.startCar(t.id)})),n.element.appendChild(o.element),n.element.appendChild(i.element),null==e||e.appendChild(n.element)})))))})),h=t,this.pageNumber(this.CURRENT_PAGE)}}}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{n(391);const e=n(331);window.onload=()=>{document.body.id="app";const t=document.getElementById("app");if(!t)throw Error("App root element not found");new e.App(t),new e.App(t).createHeader(),new e.App(t).createInputs(),new e.App(t).createGarage()}})()})();